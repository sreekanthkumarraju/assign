{"ast":null,"code":"import _defineProperty from\"C:/Users/sreepriya/Desktop/Fullstackdeveloper/student-teacher-management-formik/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/sreepriya/Desktop/Fullstackdeveloper/student-teacher-management-formik/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/sreepriya/Desktop/Fullstackdeveloper/student-teacher-management-formik/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import React,{useEffect,useState}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import'./EditStudent.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Edit(_ref){var teachers=_ref.teachers;var _useParams=useParams(),id=_useParams.id;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),students=_useState2[0],setStudent=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),count=_useState6[0],setCount=_useState6[1];var navigate=useNavigate();var getStudentDetails=function getStudentDetails(){axios.get(\"https://629ef6b78b939d3dc28b227c.mockapi.io/students/\".concat(id)).then(function(res){setStudent(res.data);}).catch(function(err){console.log(err);});};var handleChange=function handleChange(e){var name=e.target.name;var value=e.target.value;setStudent(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},name,value));});};var handleSubmit=function handleSubmit(event){event.preventDefault();console.log(students);setCount(count+1);setErrors(validate(students));console.log(count);};var updateStudentDetails=function updateStudentDetails(){if(Object.keys(errors).length===0){axios.put(\"https://629ef6b78b939d3dc28b227c.mockapi.io/students/\".concat(id),students).then(function(res){console.log(res);setTimeout(function(){navigate('/student');},[2000]);}).catch(function(err){console.log(err);});}};var validate=function validate(values){var errors={};if(!values.firstName){errors.firstName=\"First Name is required\";}else if(values.firstName.length>20){errors.firstName='Must be 20 characters or less';}if(!values.lastName){errors.lastName='Last Name is Required';}else if(values.lastName.length>25){errors.lastName='Must be 25 characters or less';}if(!values.email){errors.email=\"Email is Required\";}else if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(values.email)){errors.email='Invalid email address';}if(!values.course){errors.course=\"Must select the course\";}if(!values.mentor){errors.mentor=\"Must select the Mentor\";}return errors;};useEffect(function(){getStudentDetails();},[]);useEffect(function(){if(count>0){updateStudentDetails();console.log(count);}},[count]);return/*#__PURE__*/_jsx(\"div\",{children:students?/*#__PURE__*/_jsxs(\"form\",{id:\"edit-student-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-danger fs-2\",children:\" Update Student\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"firstName\",name:\"firstName\",className:\"update-student-firstname\",placeholder:\"First Name\",value:students.firstName,onChange:handleChange}),/*#__PURE__*/_jsx(\"p\",{className:\"text-danger fs-5\",children:errors.firstName}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"lastName\",name:\"lastName\",className:\"update-student-lastname\",placeholder:\"Last Name\",value:students.lastName,onChange:handleChange}),/*#__PURE__*/_jsx(\"p\",{className:\"text-danger fs-5\",children:errors.lastName}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"Email\",name:\"email\",className:\"update-student-email\",placeholder:\"Email\",value:students.email,onChange:handleChange}),/*#__PURE__*/_jsx(\"p\",{className:\"text-danger fs-5\",children:errors.email}),/*#__PURE__*/_jsx(\"label\",{children:\"Course\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"course\",id:\"course\",defaultValue:\"default\",className:\"update-course\",value:students.course,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"default\",disabled:true,children:\"Choose an option\"}),/*#__PURE__*/_jsx(\"option\",{value:\"information technology\",children:\"Information Technology\"}),/*#__PURE__*/_jsx(\"option\",{value:\"computer science engineering\",children:\"Computer Science Engineering\"}),/*#__PURE__*/_jsx(\"option\",{value:\"computer science and system engineering\",children:\"Computer Science And System Engineering\"}),/*#__PURE__*/_jsx(\"option\",{value:\"civil engineering\",children:\"Civil Engineering\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mechanical engineering\",children:\"Mechanical Engineering\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-danger fs-5\",children:errors.course}),/*#__PURE__*/_jsx(\"label\",{children:\"Assign a mentor \"}),/*#__PURE__*/_jsxs(\"select\",{name:\"mentor\",id:\"mentor\",defaultValue:\"default\",className:\"update-mentor\",value:students.mentor,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"default\",children:\"Choose an option\"}),teachers.map(function(teacher){return/*#__PURE__*/_jsx(\"option\",{value:teacher.id,children:teacher.id});})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-danger fs-5\",children:errors.mentor}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",id:\"update-student\",className:\"bg-danger\",children:\"Update\"})]}):' '});}","map":{"version":3,"names":["axios","React","useEffect","useState","useParams","useNavigate","Edit","teachers","id","students","setStudent","errors","setErrors","count","setCount","navigate","getStudentDetails","get","then","res","data","catch","err","console","log","handleChange","e","name","target","value","prevState","handleSubmit","event","preventDefault","validate","updateStudentDetails","Object","keys","length","put","setTimeout","values","firstName","lastName","email","test","course","mentor","map","teacher"],"sources":["C:/Users/sreepriya/Desktop/Fullstackdeveloper/student-teacher-management-formik/src/components/Student Management/Edit.js"],"sourcesContent":["import axios from \"axios\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useParams ,useNavigate} from \"react-router-dom\";\r\nimport './EditStudent.css'\r\n\r\n\r\nexport default function Edit({teachers}){\r\n\r\n     const {id} =useParams()\r\n     const [students,setStudent]=useState('')\r\n     const [errors,setErrors]=useState('')\r\n     const [count,setCount]=useState(0)\r\n     const navigate=useNavigate()\r\n\r\n     const getStudentDetails=()=>{\r\n         axios.get(`https://629ef6b78b939d3dc28b227c.mockapi.io/students/${id}`)\r\n         .then((res)=>{\r\n             setStudent(res.data)\r\n         })\r\n         .catch((err)=>{\r\n             console.log(err)\r\n         })\r\n     }\r\n\r\n     const handleChange=(e)=>{\r\n\r\n          let name=e.target.name\r\n          let value=e.target.value\r\n\r\n          setStudent((prevState)=>({\r\n              ...prevState,\r\n             [name]:value\r\n\r\n          }))\r\n    }\r\n\r\n    const handleSubmit=(event)=>\r\n    {\r\n        event.preventDefault()\r\n        console.log(students)\r\n        setCount(count+1)\r\n        setErrors(validate(students))\r\n       \r\n        console.log(count)\r\n       \r\n    }\r\n\r\n     const updateStudentDetails=()=>{\r\n        if(Object.keys(errors).length===0)\r\n        {\r\n             axios.put(`https://629ef6b78b939d3dc28b227c.mockapi.io/students/${id}`,students)\r\n             \r\n             .then((res)=>{\r\n                 console.log(res)\r\n                 setTimeout(()=>{\r\n                   navigate('/student')\r\n                 },[2000])\r\n\r\n             })\r\n             .catch((err)=>{\r\n                 console.log(err)\r\n             })\r\n            }\r\n     \r\n            }  \r\n\r\n            const validate=values =>{\r\n                const errors={};\r\n                 \r\n                 if(!values.firstName)\r\n                   {\r\n                       errors.firstName=\"First Name is required\"\r\n                   }\r\n                else if(values.firstName.length>20)\r\n                   {\r\n                      errors.firstName='Must be 20 characters or less'\r\n                   }\r\n            \r\n                   if(!values.lastName)\r\n                    {\r\n                        errors.lastName='Last Name is Required'\r\n                    }\r\n                    else if(values.lastName.length>25)\r\n                     {\r\n                         errors.lastName='Must be 25 characters or less'\r\n                     }\r\n            \r\n            \r\n                     if(!values.email){\r\n                         errors.email=\"Email is Required\"\r\n                     }\r\n                     else if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(values.email))\r\n                     {\r\n                         errors.email='Invalid email address'\r\n                     }\r\n            \r\n                     if(!values.course){\r\n                        errors.course=\"Must select the course\"\r\n                    }\r\n\r\n                    if(!values.mentor){\r\n                        errors.mentor=\"Must select the Mentor\"\r\n                    }\r\n            \r\n            \r\n                     return errors;\r\n            }\r\n\r\n     useEffect(()=>{\r\n       \r\n        getStudentDetails()   \r\n        \r\n     },[])\r\n     useEffect(()=>{\r\n         if(count>0)\r\n         {\r\n        updateStudentDetails()\r\n        console.log(count)  \r\n         }      \r\n     },[(count)])\r\n\r\n   \r\n\r\n    return(\r\n\r\n        <div>       \r\n            {\r\n            (students) ?\r\n            \r\n            <form id='edit-student-form' onSubmit={handleSubmit} >\r\n                <p className=\"text-danger fs-2\"> Update Student</p>\r\n                \r\n                <input type='text' id='firstName'  name='firstName' className=\"update-student-firstname\" placeholder=\"First Name\" value={students.firstName} onChange={handleChange}/>\r\n                <p className=\"text-danger fs-5\">{errors.firstName}</p>\r\n                \r\n                <input type='text' id='lastName'  name='lastName' className=\"update-student-lastname\" placeholder=\"Last Name\" value={students.lastName} onChange={handleChange}/>\r\n                <p className=\"text-danger fs-5\">{errors.lastName}</p>\r\n                \r\n                <input type='email' id='Email' name='email' className=\"update-student-email\" placeholder=\"Email\" value={students.email} onChange={handleChange}/>\r\n                <p className=\"text-danger fs-5\">{errors.email}</p>\r\n                \r\n                <label >Course</label>\r\n               \r\n                <select  name='course' id='course' defaultValue={\"default\"} className=\"update-course\" value={students.course} onChange={handleChange}>\r\n                  \r\n                   <option value={\"default\"} disabled>Choose an option</option>\r\n                   <option value='information technology'>Information Technology</option>\r\n                   <option value='computer science engineering'>Computer Science Engineering</option>\r\n                   <option value='computer science and system engineering'>Computer Science And System Engineering</option>\r\n                   <option value='civil engineering'>Civil Engineering</option>\r\n                   <option value='mechanical engineering'>Mechanical Engineering</option>\r\n                \r\n                </select>\r\n                <p className=\"text-danger fs-5\">{errors.course}</p>\r\n\r\n                <label >Assign a mentor </label>\r\n                \r\n                 <select name='mentor' id='mentor' defaultValue={\"default\"} className=\"update-mentor\" value={students.mentor} onChange={handleChange}>\r\n                  <option value={\"default\"} >Choose an option</option>\r\n                   {teachers.map((teacher) => (\r\n                     <option value={teacher.id}>{teacher.id}</option>\r\n                   ))}\r\n                    \r\n                 </select>\r\n                <p className=\"text-danger fs-5\">{errors.mentor}</p>\r\n\r\n\r\n                <button type='submit' id='update-student'  className=\"bg-danger\">Update</button>\r\n            </form>\r\n           \r\n           :' '\r\n           }\r\n        </div>\r\n\r\n    )\r\n\r\n        }\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}